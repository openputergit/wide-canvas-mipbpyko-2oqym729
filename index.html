<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindCare - Mental Health Support Chatbot</title>
    
    <!-- TailWind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f4f8; /* Very light blue-grey */
        }
        /* Custom Scrollbar for Chat */
        .chat-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .chat-scroll::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        .chat-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 10px;
        }
        .chat-scroll::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        /* Typing Animation */
        .typing-dot {
            animation: typing 1.4s infinite ease-in-out both;
        }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* Gradient Text */
        .text-gradient {
            background: linear-gradient(to right, #2563eb, #0891b2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* Glassmorphism card */
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>

    <div x-data="chatApp()" class="min-h-screen flex flex-col">
        <nav class="w-full bg-white shadow-sm z-50 sticky top-0">
            <div class="max-w-4xl mx-auto px-4 py-3 flex justify-between items-center">
                <div class="flex items-center gap-2 cursor-pointer" @click="setView('landing')">
                    <div class="w-8 h-8 bg-gradient-to-tr from-blue-500 to-teal-400 rounded-lg flex items-center justify-center text-white">
                        <i class="bi bi-chat-heart-fill"></i>
                    </div>
                    <span class="font-bold text-xl text-gray-700">MindCare</span>
                </div>
                <div class="flex gap-4 text-sm font-semibold text-gray-600">
                    <button @click="setView('landing')" class="hover:text-blue-500 transition" :class="{'text-blue-600': currentView === 'landing'}">Home</button>
                    <button @click="setView('about')" class="hover:text-blue-500 transition" :class="{'text-blue-600': currentView === 'about'}">About</button>
                </div>
            </div>
        </nav>

        <main class="flex-1">
            <template x-if="currentView === 'landing'">
                <div class="min-h-[90vh] flex flex-col items-center justify-center p-6 bg-gradient-to-br from-blue-50 via-white to-purple-50">
                    <div class="max-w-3xl text-center space-y-8 animate-fade-in">
                        <div class="inline-block p-4 rounded-full bg-blue-100 mb-2">
                             <i class="bi bi-robot text-4xl text-blue-500"></i>
                        </div>
                        
                        <h1 class="text-5xl md:text-6xl font-bold text-gray-800 leading-tight">
                            You are not alone. <br />
                            <span class="text-gradient">We listen.</span>
                        </h1>
                        
                        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                            A safe, non-judgmental space to talk about stress, anxiety, and whatever's on your mind. MindCare is here for you 24/7.
                        </p>

                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded text-left max-w-2xl mx-auto shadow-sm">
                            <div class="flex">
                                <i class="bi bi-exclamation-triangle-fill text-yellow-500 text-xl mr-3"></i>
                                <div>
                                    <p class="text-sm text-yellow-800 font-bold">DISCLAIMER</p>
                                    <p class="text-sm text-yellow-700">This chatbot offers emotional support only and is NOT a medical or diagnostic tool. If you are in crisis, please contact emergency services.</p>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col sm:flex-row gap-4 justify-center mt-8">
                            <button @click="startChat" class="px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-full font-semibold shadow-lg hover:shadow-xl transition transform hover:-translate-y-1 text-lg flex items-center justify-center gap-2">
                                <span>Start Chat</span>
                                <i class="bi bi-arrow-right"></i>
                            </button>
                            <button @click="setView('about')" class="px-8 py-4 bg-white hover:bg-gray-50 text-gray-700 border border-gray-200 rounded-full font-semibold shadow-sm transition text-lg">
                                Learn More
                            </button>
                        </div>
                    </div>
                </div>
            </template>
            <template x-if="currentView === 'chat'">
                <div class="flex flex-col h-[calc(100vh-64px)] max-w-4xl mx-auto bg-white md:shadow-lg md:my-4 md:rounded-2xl overflow-hidden border border-gray-100">
                    
                    <!-- Chat Header -->
                    <div class="bg-white p-4 border-b border-gray-100 flex justify-between items-center z-10">
                        <div class="flex items-center gap-3">
                            <div class="relative">
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600">
                                    <i class="bi bi-robot text-xl"></i>
                                </div>
                                <span class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"></span>
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-800">MindCare Bot</h3>
                                <p class="text-xs text-blue-500">Always here for you</p>
                            </div>
                        </div>
                        <button @click="clearChat" class="text-gray-400 hover:text-red-500 transition" title="Clear Chat">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>

                    <!-- Messages Area -->
                    <div class="flex-1 overflow-y-auto p-4 bg-gray-50 chat-scroll">
                        <div class="text-center text-xs text-gray-400 mb-6">
                            Messages are stored locally ensuring privacy. <br/> Not monitored by humans.
                        </div>
                        
                        <template x-for="msg in messages" :key="msg.id">
                            <div :class="{'justify-start': msg.sender === 'bot', 'justify-end': msg.sender === 'user'}" class="flex w-full mb-4">
                                <div class="flex max-w-[85%] md:max-w-[70%] gap-3" :class="msg.sender === 'user' ? 'flex-row-reverse' : 'flex-row'">
                                    <div x-if="msg.sender === 'bot'" class="flex-shrink-0 mt-1">
                                        <div :class="{'bg-red-100 text-red-500': msg.type === 'safety', 'bg-blue-100 text-blue-500': msg.type !== 'safety'}" class="w-8 h-8 rounded-full flex items-center justify-center">
                                            <i :class="{'bi bi-exclamation-octagon-fill': msg.type === 'safety', 'bi bi-robot': msg.type !== 'safety'}"></i>
                                        </div>
                                    </div>

                                    <div class="flex flex-col" :class="{'items-start': msg.sender === 'bot', 'items-end': msg.sender === 'user'}">
                                        <div class="px-4 py-3 rounded-2xl text-sm md:text-base leading-relaxed shadow-sm" :class="msg.sender === 'bot' ? (msg.type === 'safety' ? 'bg-red-50 border border-red-200 text-gray-800' : 'bg-white text-gray-700 border border-gray-100') : 'bg-blue-600 text-white rounded-tr-none'">
                                            <span x-text="msg.text"></span>
                                            <span class="text-[10px] text-gray-400 mt-1 px-1" x-text="msg.time"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </template>

                        <div x-show="isTyping" class="flex justify-start mb-4">
                            <div class="bg-white border border-gray-100 px-4 py-3 rounded-2xl rounded-tl-none flex gap-1 items-center">
                                <span class="w-2 h-2 bg-gray-400 rounded-full typing-dot"></span>
                                <span class="w-2 h-2 bg-gray-400 rounded-full typing-dot"></span>
                                <span class="w-2 h-2 bg-gray-400 rounded-full typing-dot"></span>
                            </div>
                        </div>
                        <div ref="scrollRef"></div>
                    </div>

                    <!-- Quick Replies -->
                    <div class="bg-white border-t border-gray-100 p-2 overflow-x-auto">
                        <div class="flex gap-2 px-2">
                            <button @click="sendQuickReply('I want to try a grounding exercise')" class="px-3 py-1.5 bg-blue-50 text-blue-600 rounded-full text-xs font-semibold hover:bg-blue-100 transition whitespace-nowrap border border-blue-100">
                                üå≤ 5-4-3-2-1 Grounding
                            </button>
                            <button @click="sendQuickReply('Can you help me breathe?')" class="px-3 py-1.5 bg-teal-50 text-teal-600 rounded-full text-xs font-semibold hover:bg-teal-100 transition whitespace-nowrap border border-teal-100">
                                üå¨Ô∏è Box Breathing
                            </button>
                            <button @click="sendQuickReply('I need a positive affirmation')" class="px-3 py-1.5 bg-purple-50 text-purple-600 rounded-full text-xs font-semibold hover:bg-purple-100 transition whitespace-nowrap border border-purple-100">
                                ‚ú® Positive Affirmation
                            </button>
                            <button @click="sendQuickReply('I‚Äôm feeling very anxious')" class="px-3 py-1.5 bg-orange-50 text-orange-600 rounded-full text-xs font-semibold hover:bg-orange-100 transition whitespace-nowrap border border-orange-100">
                                üò∞ I'm Anxious
                            </button>
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div class="bg-white p-4 border-t border-gray-100">
                        <div class="flex items-end gap-2 bg-gray-50 rounded-2xl p-2 border border-transparent focus-within:border-blue-300 focus-within:bg-white transition duration-300">
                            <button class="p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-200 transition">
                                <i class="bi bi-emoji-smile"></i>
                            </button>
                            <textarea
                                x-model="inputText"
                                @keydown.enter.prevent="sendMessage"
                                placeholder="Type your feelings here..."
                                class="flex-1 bg-transparent border-0 focus:ring-0 resize-none max-h-32 py-2 text-gray-700 placeholder-gray-400"
                                rows="1"
                            ></textarea>
                            <button 
                                @click="sendMessage"
                                :disabled="!inputText.trim()"
                                class="p-2 bg-blue-600 text-white rounded-xl shadow-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition transform active:scale-95"
                            >
                                <i class="bi bi-send-fill text-lg"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </template>
            <template x-if="currentView === 'about'">
                <div class="max-w-4xl mx-auto p-6 md:py-12 space-y-12">
                    <section class="text-center space-y-4">
                        <h2 class="text-3xl font-bold text-gray-800">About MindCare</h2>
                        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                            MindCare was developed as a B-Tech minor project to bridge the gap between daily stress and professional help. We believe that everyone deserves a listening ear.
                        </p>
                    </section>

                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4 text-blue-600 text-xl">
                                <i class="bi bi-heart-pulse"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-2">Why this app?</h3>
                            <p class="text-gray-600">
                                Mental health awareness is critical. Many people suffer in silence due to stigma or lack of resources. This tool aims to provide immediate, low-barrier emotional first-aid.
                            </p>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                            <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mb-4 text-purple-600 text-xl">
                                <i class="bi bi-shield-lock"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-2">Safety First</h3>
                            <p class="text-gray-600">
                                While we use advanced logic to provide support, we prioritize safety. Our system is designed to detect crisis situations and direct users to human professionals immediately.
                            </p>
                        </div>
                    </div>

                    <div class="bg-slate-800 text-slate-200 p-8 rounded-2xl text-center">
                        <h3 class="text-xl font-bold mb-4 text-white">Important Notice</h3>
                        <p class="mb-4">
                            MindCare is an automated system. It cannot diagnose mental health conditions or prescribe medication.
                        </p>
                        <p class="text-sm opacity-70">
                            Project by: [Student Name/Group] ‚Ä¢ B-Tech Minor Project 
                        </p>
                    </div>
                </div>
            </template>
        </main>

        <!-- Footer -->
        <footer class="bg-white border-t border-gray-200 py-6 mt-auto">
            <div class="max-w-4xl mx-auto px-4 text-center text-gray-500 text-sm">
                <p>¬© 2023 MindCare Project. Made with <i class="bi bi-heart-fill text-red-400"></i> for Mental Health Awareness.</p>
                <p class="mt-2 text-xs text-gray-400">Disclaimer: Not a replacement for professional medical advice.</p>
            </div>
        </footer>
    </div>

    <script>
        function chatApp() {
            return {
                currentView: 'landing',
                messages: [],
                inputText: '',
                isTyping: false,
                scrollRef: null,

                setView(view) {
                    this.currentView = view;
                    if (view === 'chat') {
                        this.loadChat();
                    }
                },

                loadChat() {
                    this.messages = [{
                        id: Date.now(),
                        sender: 'bot',
                        text: "Hi friend. I'm MindCare. I'm here to listen without judgment. How are you feeling right now?",
                        type: 'normal',
                        time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
                    }];
                    this.scrollToBottom();
                },

                startChat() {
                    this.setView('chat');
                },

                sendMessage() {
                    const text = this.inputText.trim();
                    if (!text) return;

                    const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                    this.messages.push({ id: Date.now(), sender: 'user', text: text, time: time });
                    this.inputText = '';
                    this.isTyping = true;
                    this.scrollToBottom();
                    
                    // Simulating the bot response delay
                    setTimeout(() => this.getBotResponse(text), 1500);
                },

                async getBotResponse(userMessage) {
                    // Simulate fetching from API
                    const response = await fetch('http://localhost:3000/chat', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ message: userMessage }),
                    });
                    const data = await response.json();
                    this.messages.push({
                        id: Date.now(),
                        sender: 'bot',
                        text: data.reply,
                        type: 'normal', // You can adjust this based on content from response
                        time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
                    });
                    this.isTyping = false;
                    this.scrollToBottom();
                },

                sendQuickReply(replyText) {
                    this.inputText = replyText;
                    this.sendMessage();
                },

                clearChat() {
                    if (confirm("Are you sure you want to clear your chat history?")) {
                        this.messages = [];
                        this.loadChat();
                    }
                },

                scrollToBottom() {
                    if (this.scrollRef)
                        this.scrollRef.scrollIntoView({ behavior: 'smooth' });
                }
            };
        }
    </script>
<script>document.body.addEventListener('wheel', e => { if (!e.ctrlKey) return; e.preventDefault(); return }, { passive: false })</script>
	</body>
</html>